<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Homework #4 &#8212; MPCS 51082 - Introduction to Unix Systems  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <link rel="stylesheet" type="text/css" href="../../_static/chiweb.css?v=9805d56b" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script defer="defer" src="../../_static/rmsearch.js?v=9704a757"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          MPCS 51082</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../syllabus.html">Syllabus</a></li>
                <li><a href="../../calendar.html">Calendar</a></li>
                <li><a href="../../modules/index.html">Modules</a></li>
                <li><a href="../index.html">Assignments</a></li>
                <li><a href="../../office-hours.html">Office Hours</a></li>
                <li><a href="https://uchicago-cs.github.io/student-resource-guide/">CS Student Resources</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Homework #4</a><ul>
<li><a class="reference internal" href="#cs-linux-machine">CS Linux Machine</a></li>
<li><a class="reference internal" href="#creating-your-private-repository">Creating Your Private Repository</a><ul>
<li><a class="reference internal" href="#problem-1">Problem 1</a><ul>
<li><a class="reference internal" href="#task-signal-handling">Task : Signal Handling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#problem-2">Problem 2</a><ul>
<li><a class="reference internal" href="#implement-the-compute-num-args-function">Implement the <code class="docutils literal notranslate"><span class="pre">compute_num_args</span></code> function</a></li>
<li><a class="reference internal" href="#implement-tht-find-arg-function">Implement tht <code class="docutils literal notranslate"><span class="pre">find_arg</span></code> function</a></li>
<li><a class="reference internal" href="#parse-lines-function"><code class="docutils literal notranslate"><span class="pre">parse_lines</span></code> function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#grading">Grading</a></li>
<li><a class="reference internal" href="#submission">Submission</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="sourcelink">
  <a href="../../_sources/assignments/hw4/index.rst.txt"
     rel="nofollow">Source</a>
</div>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <section id="homework-4">
<h1>Homework #4<a class="headerlink" href="#homework-4" title="Link to this heading">¶</a></h1>
<p><strong>Due: Tuesday, November 7th at 11:59pm</strong></p>
<p>This homework is intended to server as an introduction to C programming language. This assignment is not meant to cover everything in the C language.
It solely serves as a way for you to get familiar with working with C, and continue learning about shell scripting.</p>
<section id="cs-linux-machine">
<h2>CS Linux Machine<a class="headerlink" href="#cs-linux-machine" title="Link to this heading">¶</a></h2>
<p>You will need access to an Linux based machine when working on your homework assignments. You should not test your programs on macOS or
Windows Linux because these operating systems do not provide all utility commands necessary for completing this and possibly future assignments.
Additionally, if they do provide a command then it may not contain all options that a Unix-like system provides.
<strong>We will use and grade all assignments on the CS Linux machines and all programming assignments must work correctly on these machines.</strong>
However, you can work locally on a Unix or Unix-like machine but ensure that you test your final solutions on a CS Linux machine.</p>
<p>Please follow the instructions provided here</p>
<ul class="simple">
<li><p><a class="reference external" href="https://uchicago-cs.github.io/student-resource-guide/vscode/ssh.html">Using Visual Studio Code and SSH</a></p></li>
</ul>
</section>
<section id="creating-your-private-repository">
<h2>Creating Your Private Repository<a class="headerlink" href="#creating-your-private-repository" title="Link to this heading">¶</a></h2>
<p>For each assignment, a Git repository will be created for you on GitHub. However, before that repository can be created for you, you need to have a
GitHub account. If you do not yet have one, you can get an account here: <a class="reference external" href="https://github.com/join">https://github.com/join</a>.</p>
<p>To actually get your private repository, you will need this invitation URL:</p>
<ul class="simple">
<li><p><strong>HW4 invitation (Please check the Post “Homework #4 is ready” Ed)</strong></p></li>
</ul>
<p>When you click on an invitation URL, you will have to complete the following steps:</p>
<ol class="arabic simple">
<li><p>You will need to select your CNetID from a list. This will allow us to know what student is associated with each GitHub account. This step is only done for the very first invitation you accept.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are on the waiting list for this course you will not have a repository made for you until you are admitted into the course. I will post the starter code on Ed so you can work on the assignment until you are admitted into the course.</p>
</div>
<ol class="arabic simple" start="2">
<li><p>You must click “Accept this assignment” or your repository will not actually be created.</p></li>
<li><p>After accepting the assignment, Github will take a few minutes to create your repository. You should receive an email from Github when your repository is ready. Normally, it’s ready within seconds and you can just refresh the page.</p></li>
<li><dl class="simple">
<dt>You now need to clone your repository (i.e., download it to your machine).</dt><dd><ul class="simple">
<li><p>Make sure you’ve set up <a class="reference external" href="https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh">SSH access</a> on your GitHub account.</p></li>
<li><p>For each repository, you will need to get the SSH URL of the repository. To get this URL, log into GitHub and navigate to your project repository (take into account that you will have a different repository per project). Then, click on the green “Code” button, and make sure the “SSH” tab is selected. Your repository URL should look something like this: <a class="reference external" href="mailto:git&#37;&#52;&#48;github&#46;com">git<span>&#64;</span>github<span>&#46;</span>com</a>:mpcs51082-win25/hw4-GITHUB-USERNAME.git.</p></li>
<li><p>If you do not know how to use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> to clone your repository then follow this guide that Github provides: <a class="reference external" href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository">Cloning a Repository</a></p></li>
</ul>
</dd>
</dl>
</li>
</ol>
<p>If you run into any issues, or need us to make any manual adjustments to your registration, please let us know via Ed Discussion.</p>
<section id="problem-1">
<h3>Problem 1<a class="headerlink" href="#problem-1" title="Link to this heading">¶</a></h3>
<p>For this problem you will update your homework 3 solution to include signal handling for reloading and print a message when the script exits. To start copy over your solution <code class="docutils literal notranslate"><span class="pre">p1/p1.sh</span></code> from your homework 3 repository into your <code class="docutils literal notranslate"><span class="pre">p1/p1.sh</span></code> file inside your homework 4 repository and remove my <code class="docutils literal notranslate"><span class="pre">dir_timestamp()</span></code> function and update the polling code to the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">while</span><span class="w"> </span>:<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>sleep<span class="w"> </span><span class="m">1</span>
<span class="k">done</span>
</pre></div>
</div>
<p>Update your solution (if necessary)to ensure files inside log file appear in Lexicographical order. For example, if the following files: <code class="docutils literal notranslate"><span class="pre">data001.in</span></code>, <code class="docutils literal notranslate"><span class="pre">data002.in</span></code>, and <code class="docutils literal notranslate"><span class="pre">data003.in``are</span> <span class="pre">inside</span> <span class="pre">the</span> <span class="pre">directory</span> <span class="pre">given</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">script</span> <span class="pre">then</span> <span class="pre">ensure</span> <span class="pre">the</span> <span class="pre">info</span> <span class="pre">line</span> <span class="pre">for</span> <span class="pre">``data001.in</span></code> appears first followed by  <code class="docutils literal notranslate"><span class="pre">data002.in</span></code> and lastly   <code class="docutils literal notranslate"><span class="pre">data003.in</span></code>.</p>
<section id="task-signal-handling">
<h4>Task : Signal Handling<a class="headerlink" href="#task-signal-handling" title="Link to this heading">¶</a></h4>
<p>Your script must also handle catching signals. Specifically, it must do the following</p>
<ol class="arabic simple">
<li><p>If the kernel sends a <code class="docutils literal notranslate"><span class="pre">SIGUSR1</span></code> signal to the script then it must first output the entry: <code class="docutils literal notranslate"><span class="pre">%s,WARN,[RELOAD],Script</span> <span class="pre">reloading...</span></code>, where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is current timestamp. After printing out the warning entry, the script must then process the directory of files again.</p></li>
<li><p>If the kernel sends a <code class="docutils literal notranslate"><span class="pre">SIGCONT</span></code> signal to the script then it must output the entry: <code class="docutils literal notranslate"><span class="pre">%s,WARN,[RESUME],Script</span> <span class="pre">resuming...</span></code>, where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is current timestamp. <strong>Do not</strong> process the directory of files again.</p></li>
<li><p>Catch a graceful exit using <code class="docutils literal notranslate"><span class="pre">EXIT</span></code> pseudo-signal and then prints the <code class="docutils literal notranslate"><span class="pre">%s,WARN,[EXIT],Script</span> <span class="pre">exiting...&quot;</span></code>, where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is current timestamp. Do not reprocess the files.</p></li>
</ol>
<p>Testcaes are already provided to for testing this implementation inside <code class="docutils literal notranslate"><span class="pre">p1/tests</span></code>. You can run the tests</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>p1/tests
<span class="gp">$ </span>bash<span class="w"> </span>run.sh
</pre></div>
</div>
</section>
</section>
<section id="problem-2">
<h3>Problem 2<a class="headerlink" href="#problem-2" title="Link to this heading">¶</a></h3>
<p>This problem is intended to help you get prepared for starting your shell application in the next assignment. Specifically, you will implement functions that parse command lines and retrieve information about them (e.g., the total number of arguments). For example,</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls<span class="w"> </span>-la<span class="w"> </span>~/mpcs51082-aut24
</pre></div>
</div>
<p>The command line is <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-la</span> <span class="pre">~/mpcs51082-aut24</span> <span class="pre">``,</span> <span class="pre">where</span> <span class="pre">the</span> <span class="pre">command</span> <span class="pre">is</span> <span class="pre">``ls</span></code> and has two arguments: <code class="docutils literal notranslate"><span class="pre">-la</span></code>, and <code class="docutils literal notranslate"><span class="pre">~/mpcs51082-aut24</span></code> .</p>
<p>The stubs for the functions you are already inside <code class="docutils literal notranslate"><span class="pre">p2/parse.c</span></code>. The <code class="docutils literal notranslate"><span class="pre">p2/parse.c</span></code> already contains a main function with test cases to test the functions you will implement. You only need to implement the required functions. You can comment out (e.g.,``//<a href="#id1"><span class="problematic" id="id2">``</span></a>) test-cases such that only the ones you want to test currently run.</p>
<section id="implement-the-compute-num-args-function">
<h4>Implement the <code class="docutils literal notranslate"><span class="pre">compute_num_args</span></code> function<a class="headerlink" href="#implement-the-compute-num-args-function" title="Link to this heading">¶</a></h4>
<p>Copy the following function documentation above the definition inside <code class="docutils literal notranslate"><span class="pre">parse.c</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">* compute_num_args - computes the number of arguments in the provided command line string</span>
<span class="cm">*</span>
<span class="cm">* line: a string that represents text from a shell&#39;s command line</span>
<span class="cm">*</span>
<span class="cm">* Assumptions: You can assume the line does not contain more than a single command (i.e., we do not have &quot;&amp;&amp;&quot; or &quot;||&quot; or &quot;;&quot; in the line string).</span>
<span class="cm">*</span>
<span class="cm">* Returns: the total number of arguments for the command including the command name</span>
<span class="cm">*/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">compute_num_args</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">line</span><span class="p">);</span>
</pre></div>
</div>
<p>This function counts the total number of arguments including the program name. For example, if <code class="docutils literal notranslate"><span class="pre">line</span> <span class="pre">=&quot;ls</span> <span class="pre">-la</span> <span class="pre">~/mpcs51082-aut24</span> <span class="pre">&quot;</span></code> then <code class="docutils literal notranslate"><span class="pre">compute_num_args</span></code> will return <code class="docutils literal notranslate"><span class="pre">3</span></code>.  For this function, you
can assume there will not be multiple commands executed on a single line (e.g., <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">;</span> <span class="pre">echo</span> <span class="pre">-e</span> <span class="pre">hw</span> <span class="pre">&amp;</span> <span class="pre">cd</span> <span class="pre">..</span></code> will never be given). Here are few test-cases to try</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">compute_num_args</span><span class="p">(</span><span class="s">&quot;ls -la ~/mpcs51082-aut24 &quot;</span><span class="p">));</span><span class="w">  </span><span class="c1">// prints 3</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">compute_num_args</span><span class="p">(</span><span class="s">&quot;cd ..&quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">// prints 2</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">compute_num_args</span><span class="p">(</span><span class="s">&quot;ls&quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">// prints 1</span>
</pre></div>
</div>
<p><strong>hint</strong>: Look up the <code class="docutils literal notranslate"><span class="pre">str_tok</span></code> function in the string library.</p>
</section>
<section id="implement-tht-find-arg-function">
<h4>Implement tht <code class="docutils literal notranslate"><span class="pre">find_arg</span></code> function<a class="headerlink" href="#implement-tht-find-arg-function" title="Link to this heading">¶</a></h4>
<p>Copy the following function documentation above the definition inside <code class="docutils literal notranslate"><span class="pre">parse.c</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">* find_arg - finds the argument at a specific index from within the command line string</span>
<span class="cm">*</span>
<span class="cm">* line: a string that represents text from a shell&#39;s command line</span>
<span class="cm">*</span>
<span class="cm">* index: the index of the argument that is being requested.</span>
<span class="cm">*</span>
<span class="cm">* argument: the string to copy the requested argument into.</span>
<span class="cm">*</span>
<span class="cm">* Assumptions: O-indexing is assumed. The parameter (&quot;argument&quot;) is big enough to hold its value.</span>
<span class="cm">*              You can assume the line does not contain more than a single command (i.e., we do not have &quot;&amp;&quot; or &quot;;&quot; in the line string).</span>
<span class="cm">* Returns: the following error codes based on execution:</span>
<span class="cm">*      0 - success. Was able to find the argument as the specified index</span>
<span class="cm">*      1 - failure. Index was not valid (i.e., not within the range of 0 to maximum number of arguments in the line)</span>
<span class="cm">*/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">find_arg</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argument</span><span class="p">);</span>
</pre></div>
</div>
<p>This function finds a specific argument on the command line and copies the argument into the <code class="docutils literal notranslate"><span class="pre">argument</span></code> parameter. For example, if <code class="docutils literal notranslate"><span class="pre">line</span> <span class="pre">=&quot;ls</span> <span class="pre">-la</span> <span class="pre">~/mpcs51082-aut24</span> <span class="pre">&quot;</span></code> then <code class="docutils literal notranslate"><span class="pre">find_arg</span></code> at <code class="docutils literal notranslate"><span class="pre">index=0</span></code> will copy <code class="docutils literal notranslate"><span class="pre">ls</span></code> and will return <code class="docutils literal notranslate"><span class="pre">0</span></code> to indicate
it was able to find the argument. Otherwise, if <code class="docutils literal notranslate"><span class="pre">find_arg</span></code> is given an invalid index (i.e., outside the bounds of the <code class="docutils literal notranslate"><span class="pre">line</span></code> arguments) then the function returns <code class="docutils literal notranslate"><span class="pre">1</span></code>. For this function, you
can assume there will not be multiple commands executed on a single line (e..g, <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">;</span> <span class="pre">echo</span> <span class="pre">-e</span> <span class="pre">hw</span> <span class="pre">&amp;</span> <span class="pre">cd</span> <span class="pre">..</span></code> will never be given). Also you can assume <code class="docutils literal notranslate"><span class="pre">argument</span></code> will always be big enough to hold the argument being copied. Here are few test-cases to try</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="w"> </span><span class="n">argument</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">find_arg</span><span class="p">(</span><span class="s">&quot;ls -la ~/mpcs51082-aut24 &quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">argument</span><span class="p">));</span><span class="w"> </span><span class="c1">// prints 0</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">argument</span><span class="p">);</span><span class="w"> </span><span class="c1">// prints ls</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">find_arg</span><span class="p">(</span><span class="s">&quot;ls -la ~/mpcs51082-aut24 &quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">argument</span><span class="p">));</span><span class="w"> </span><span class="c1">// prints 0</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">argument</span><span class="p">);</span><span class="w"> </span><span class="c1">// prints -la</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">find_arg</span><span class="p">(</span><span class="s">&quot;ls -la ~/mpcs51082-aut24 &quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">argument</span><span class="p">));</span><span class="w"> </span><span class="c1">// prints 1</span>
</pre></div>
</div>
</section>
<section id="parse-lines-function">
<h4><code class="docutils literal notranslate"><span class="pre">parse_lines</span></code> function<a class="headerlink" href="#parse-lines-function" title="Link to this heading">¶</a></h4>
<p>Copy the following function documentation above the definition inside <code class="docutils literal notranslate"><span class="pre">parse.c</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">* parse_lines - Counts the total number of background and foreground jobs in the array of lines provided.</span>
<span class="cm">*</span>
<span class="cm">* lines: an array of strings that contain strings representing command line strings</span>
<span class="cm">*</span>
<span class="cm">* lines_len: the length of the lines array.</span>
<span class="cm">*</span>
<span class="cm">* Assumption: You can assume that the command line strings will only contain &quot;&amp;&quot; and &quot;;&quot; characters to run multiple commands on a single line.</span>
<span class="cm">*</span>
<span class="cm">* Returns: a shellinfo_t with the total counts of the the number of background and foreground jobs.</span>
<span class="cm">*/</span>
<span class="n">shellinfo_t</span><span class="w"> </span><span class="nf">parse_lines</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="n">lines</span><span class="p">[],</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">lines_len</span><span class="p">);</span>
</pre></div>
</div>
<p>This function determines the total number foreground and background jobs across all command lines within the array of strings. This function uses the <code class="docutils literal notranslate"><span class="pre">shellinfo_t</span></code> type to return the total number of foreground and background jobs. For example, if given the following</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">lines2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;ls -la ~/mpcs51082-aut24 &amp; cd ..; ls&quot;</span><span class="p">,</span>
<span class="w">                   </span><span class="s">&quot;echo -e </span><span class="se">\&quot;</span><span class="s">Hello</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">};</span>
<span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_lines</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;fg=%d, bg=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">results</span><span class="p">.</span><span class="n">fg</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">.</span><span class="n">bg</span><span class="p">);</span>
</pre></div>
</div>
<p>This will return <code class="docutils literal notranslate"><span class="pre">fg=3,</span> <span class="pre">bg=1</span></code> because:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-la</span> <span class="pre">~/mpcs51082-aut24</span> <span class="pre">``</span> <span class="pre">is</span> <span class="pre">background</span> <span class="pre">jobs</span> <span class="pre">since</span> <span class="pre">``&amp;</span></code> follows the command.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">..</span></code> is a foreground job since it ends in a <code class="docutils literal notranslate"><span class="pre">;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ls</span></code> is the last command on the line and it is a foreground job since it does not end in a <code class="docutils literal notranslate"><span class="pre">&amp;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">-e</span> <span class="pre">\&quot;Hello\&quot;</span></code> is a foreground job.</p></li>
</ol>
<p>You can assume for this problem the lines will only contain <code class="docutils literal notranslate"><span class="pre">;</span></code> or <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>  to represent running multiple commands on a single line. Here are few test-cases to try</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">shellinfo_t</span><span class="w"> </span><span class="n">results</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">lines1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;ls -la ~/mpcs51082-aut24 &amp; cd .. &quot;</span><span class="p">};</span>
<span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_lines</span><span class="p">(</span><span class="n">lines1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;fg=%d, bg=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">results</span><span class="p">.</span><span class="n">fg</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">.</span><span class="n">bg</span><span class="p">);</span><span class="w"> </span><span class="c1">//prints fg=1,bg=1</span>

<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">lines2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;ls -la ~/mpcs51082-aut24 &amp; cd .. &quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s">&quot;echo -e </span><span class="se">\&quot;</span><span class="s">Hello</span><span class="se">\&quot;</span><span class="s">;ls;ls;cat file.txt &gt; out.txt &amp;&quot;</span><span class="p">};</span>
<span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_lines</span><span class="p">(</span><span class="n">lines2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;fg=%d, bg=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">results</span><span class="p">.</span><span class="n">fg</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">.</span><span class="n">bg</span><span class="p">);</span><span class="w"> </span><span class="c1">// prints fg=4,bg=2</span>


<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">lines3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;ls -la ~/mpcs51082-aut24 &amp; cd .. ; ./crawler &amp;&quot;</span><span class="p">,</span>
<span class="w">                   </span><span class="s">&quot;echo -e </span><span class="se">\&quot;</span><span class="s">Hello</span><span class="se">\&quot;</span><span class="s">;ls;ls;cat file.txt &gt; out.txt &amp;&quot;</span><span class="p">,</span>
<span class="w">                   </span><span class="s">&quot;cd ..&quot;</span><span class="p">};</span>
<span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_lines</span><span class="p">(</span><span class="n">lines3</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;fg=%d, bg=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">results</span><span class="p">.</span><span class="n">fg</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">.</span><span class="n">bg</span><span class="p">);</span><span class="w"> </span><span class="c1">// prints fg=5,bg=3</span>
</pre></div>
</div>
<p>To help you understand how to work with an array of strings, I have given you a sample program  <code class="docutils literal notranslate"><span class="pre">p2/vowels.c</span></code> that counts the total number of vowels inside an array of strings. Look at and compile/execute this program before you start implementing: <code class="docutils literal notranslate"><span class="pre">parse_lines</span></code>.</p>
</section>
</section>
<section id="grading">
<h3>Grading<a class="headerlink" href="#grading" title="Link to this heading">¶</a></h3>
<p>Programming assignments will be graded according to a general rubric. Specifically, we will assign points for completeness, correctness, design, and style. (For more details on the categories, see our Assignment Rubric page.)</p>
<p>The exact weights for each category will vary from one assignment to another. For this assignment, the weights will be:</p>
<ul class="simple">
<li><p><strong>Completeness</strong>: 80%</p></li>
<li><p><strong>Correctness</strong>: 10%</p></li>
<li><p><strong>Design/Style</strong>: 10%</p></li>
</ul>
</section>
<section id="submission">
<h3>Submission<a class="headerlink" href="#submission" title="Link to this heading">¶</a></h3>
<p>Before submitting, make sure you’ve added, committed, and pushed all your code to GitHub. You must submit your final work through Gradescope (linked from our Canvas site) in the “Homework #4” assignment page by linking your Github account to your Gradescope account and upload the correct repository based on the homework assignment. When you submit your homework, a pop window will appear. Click on “Github” and then  “Connect to Github” to connect your Github account to Gradescope. Once you connect (you will only need to do this once), then you can select the repository you wish to upload and the branch (which should always be “main” or “master”) for this course.</p>
<p>Depending on the assignment, once you submit your work, an “autograder” will run. This autograder should produce the same test results as when you run the code yourself; if it doesn’t, please let us know so we can look into it. A few other notes:</p>
<ul class="simple">
<li><p>You are allowed to make as many submissions as you want before the deadline.</p></li>
<li><p>Please make sure you have read and understood our <a class="reference internal" href="../../syllabus.html#late-submissions"><span class="std std-ref">Late Submission Policy</span></a>.</p></li>
<li><p>Your completeness score is determined solely based on the automated tests, but we may adjust your score if you attempt to pass tests by rote (e.g., by writing code that hard-codes the expected output for each possible test input).</p></li>
<li><p>Gradescope will report the test score it obtains when running your code. If there is a discrepancy between the score you get when running our grader script, and the score reported by Gradescope, please let us know so we can take a look at it.</p></li>
</ul>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2021-2025, University of Chicago.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.3.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>